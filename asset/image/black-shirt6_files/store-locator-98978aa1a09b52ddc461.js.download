(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[442],{99716:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return A},default:function(){return M}});var r=n(92809),i=n(30266),o=n(809),s=n.n(o),a=n(67294),l=n(47602),c=n.n(l),d=n(6454),u=n(37698),f=n(52785),h=n(68218),_=(n(40724),n(83484)),v=(n(13372),n(83924)),m=n.n(v),x=n(61121),p=n(83136),j=n.n(p),g=n(85893),b=function(e){var t=e.lng,n=void 0===t?0:t,r=e.lat,i=void 0===r?0:r,o=e.isClick,s=void 0!==o&&o,l=(0,h.Sx)().current;(0,a.useEffect)((function(){n&&i&&c()}),[i,n]);var c=function(){l.flyTo({center:[n,i],zoom:13,duration:2e3})};return s?(0,g.jsx)("div",{className:j().button,onClick:c,children:(0,g.jsx)(x.nDs,{})}):null},C=n(3759),N=n(2777),y=n(30381),w=n.n(y),k=n(74865),L=n.n(k),O=n(52091),S=n(14277),D=n(11163);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=!0,M=function(e){var t=(0,a.useState)([]),n=t[0],r=t[1],o=(0,a.useState)([]),l=o[0],v=o[1],x=(0,a.useRef)(),p=(0,D.useRouter)(),j=(0,a.useState)({}),y=j[0],k=j[1],I=(0,a.useState)({}),A=I[0],M=I[1],Z=(0,a.useRef)(),E=(0,a.useState)({store_id:null,search:""}),H=E[0],G=E[1],R=(0,a.useState)({latitude:0,longitude:0,zoom:15}),z=R[0],F=R[1],T=(0,a.useRef)();T.current=[],(0,a.useEffect)((function(){if(x.current){var e=x.current.getMap(),t=new(m())({accessToken:_.e7,unit:"metric",profile:"mapbox/driving",interactive:!1});return e.addControl(t,"top-right"),Z.current=t,function(){e.remove()}}}),[x.current]);var B=function(e,t){var n=(0,u.getDistance)({latitude:e.lat,longitude:e.lng},{latitude:t.lat,longitude:t.lng});return Number((n/1e3).toFixed(2))};(0,a.useEffect)((function(){J()}),[]);var J=function(){var e=(0,i.Z)(s().mark((function e(){var t,n,i,o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L().start(),e.next=4,(0,_.v_)("address/getListStoreLocation");case 4:n=e.sent,i=n.data.map((function(e,t){return P(P({},e),{},{lngLat:[e.latitude,e.longitude],id:++t,store_id:e.store_id.length>1?e.store_id.filter((function(e){return e>0})):e.store_id})})),null!==(t=p.query)&&void 0!==t&&t.store&&null!==n&&void 0!==n&&n.store&&"undefined"!==typeof(a=null===(o=n.store.find((function(e){return e.name.toLowerCase().includes(p.query.store.toLowerCase())})))||void 0===o?void 0:o.store_id)&&G((function(e){return P(P({},e),{},{store_id:a})})),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,o=e.coords.longitude;F(P(P({},z),{},{latitude:t,longitude:o}));var s=i.map((function(e){return P(P({},e),{},{distance:B({lat:t,lng:o},{lat:e.lngLat[0],lng:e.lngLat[1]})})}));r(s.sort((function(e,t){return e.distance>t.distance?1:-1}))),v(n.store),L().done()})),L().done(),r(i),v(n.store),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),q=function(e){try{var t=e;return null!==H.store_id&&(t=t.filter((function(e){return e.store_id.includes(H.store_id)}))),H.search&&(t=t.filter((function(e){return e.store_name.toLowerCase().includes(H.search.toLowerCase())}))),t}catch(n){return e}},K=(0,a.useMemo)((function(){return n.length?(null!==H.store_id||H.search?q(n):n).map((function(e){return(0,g.jsx)(h.Jx,{onClick:function(){return Y(e)},latitude:e.lngLat[0],longitude:e.lngLat[1],children:(0,g.jsx)("div",{className:"".concat(c().selectedMarker," ").concat(e.id===(null===A||void 0===A?void 0:A.id)&&c().active),children:(0,g.jsx)(O.KSn,{})})})})):null}),[n,H.store_id,H.search,A]),V=function(){Z.current&&Z.current.removeRoutes()},W=function(e){null!==A&&void 0!==A&&A.id&&M({}),null!==y&&void 0!==y&&y.id&&k({}),G((function(t){return P(P({},t),{},{store_id:e})}))},X=function(e){window.open(e,"_blank")},Y=function(e){try{if(M(e),null!==y&&void 0!==y&&y.id&&k(e),T)return T.current[e.id].scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}catch(t){console.log(t)}};return(0,g.jsx)(f.Z,P(P({},e),{},{children:(0,g.jsxs)("div",{className:c().container,children:[(0,g.jsxs)("div",{className:c().headerContainer,children:[(0,g.jsx)("h1",{children:"Find a store"}),(0,g.jsxs)("div",{className:c().filterContainer,children:[(0,g.jsxs)("ul",{className:c().filterStoreList,children:[(0,g.jsx)("li",{onClick:function(){return W(null)},className:null!==H.store_id?"":c().active,children:"ALL"}),l.map((function(e){return(0,g.jsx)("li",{onClick:function(){return W(e.store_id)},className:H.store_id===e.store_id?c().active:"",children:e.name})}))]}),(0,g.jsxs)("div",{className:c().searchContainer,children:[(0,g.jsx)("input",{onChange:function(e){return t=e.target.value,null!==A&&void 0!==A&&A.id&&M({}),null!==y&&void 0!==y&&y.id&&k({}),void G((function(e){return P(P({},e),{},{search:t})}));var t},placeholder:"Search by store name",type:"text"}),(0,g.jsx)(d.w75,{})]})]})]}),(0,g.jsxs)("div",{className:c().mapAndContentContainer,children:[(0,g.jsx)("div",{className:c().mapContainer,children:(0,g.jsx)(h.Ib,{children:(0,g.jsxs)(h.ZP,{onLoad:function(e){var t=e.target;["poi-label","poi-store-label","poi-school-label"].forEach((function(e){t.getLayer(e)&&t.setLayoutProperty(e,"visibility","none")}))},ref:x,initialViewState:{latitude:z.latitude,longitude:z.longitude,zoom:z.zoom},interactiveLayerIds:["sf-neighborhoods-fill"],mapStyle:"mapbox://styles/mapbox/streets-v12",style:{width:"100%"},mapboxAccessToken:_.e7,children:[(0,g.jsx)(h.Jx,{longitude:z.longitude,latitude:z.latitude,children:(0,g.jsx)("div",{className:c().currentMarker})}),K,(0,g.jsx)(b,{lat:Object.keys(A).length>0?null===A||void 0===A?void 0:A.lngLat[0]:0,lng:Object.keys(A).length>0?null===A||void 0===A?void 0:A.lngLat[1]:0}),(0,g.jsx)(b,{lat:z.latitude,lng:z.longitude,isClick:!0})]})})}),(0,g.jsx)("div",{className:"".concat(c().listContainer," ").concat((null===y||void 0===y?void 0:y.id)&&c().isShowDetail),children:null!==y&&void 0!==y&&y.id?(0,g.jsxs)("div",{className:c().locatorDetail,children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{children:null===y||void 0===y?void 0:y.store_name}),(0,g.jsx)("span",{onClick:function(){return k({})},className:"closeIcon",children:(0,g.jsx)(N.FiX,{})})]}),(0,g.jsx)(C.Z,{isImageOnMap:!0,isResize:!1,isFade:!1,isZoomIn:!0,style:{borderRadius:4,overflow:"hidden"},image:null===y||void 0===y?void 0:y.image}),(0,g.jsx)("p",{children:null===y||void 0===y?void 0:y.address}),!(null===y||void 0===y||!y.distance)&&(0,g.jsxs)("p",{children:[null===y||void 0===y?void 0:y.distance," km away"]}),(0,g.jsxs)("p",{className:c().textOverflow,children:["(+855) ",null===y||void 0===y?void 0:y.phone_number]}),(0,g.jsx)("div",{children:(0,g.jsxs)("button",{onClick:function(){return X(null===y||void 0===y?void 0:y.map_link)},className:c().buttonGetDirect,children:[(0,g.jsx)(O.Nh4,{})," ",(0,g.jsx)("span",{children:"Get Direction"})]})}),(0,g.jsxs)("div",{className:c().scheduleList,children:[(0,g.jsx)("h2",{children:"Hours"}),(0,g.jsx)("ul",{children:null===y||void 0===y?void 0:y.scheduled_at.map((function(e,t){return(0,g.jsxs)("li",{style:{"--delay":"".concat((t+6)/15,"s")},children:[(0,g.jsx)("span",{children:null===e||void 0===e?void 0:e.date}),(0,g.jsxs)("span",{children:[w()(e.open,"HH:mm").format("hh:mm A")," -"," ",w()(e.close,"HH:mm").format("hh:mm A")]})]})}))})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:c().textNearBy,children:"Near by"}),(0,g.jsx)("ul",{className:c().list,children:(null!==H.store_id||H.search?q(n):n).length?(null!==H.store_id||H.search?q(n):n).map((function(e,t){var n=e.scheduled_at.find((function(e){return e.date===w()().format("dddd").toLowerCase()}));return(0,g.jsxs)("li",{style:{"--delay":"".concat((t+1)/10,"s")},ref:function(t){return T.current[e.id]=t},onClick:function(){return function(e,t){try{if((null===e||void 0===e?void 0:e.id)!=(null===A||void 0===A?void 0:A.id)&&V(),M(e),t&&T.current)return T.current[e.id].scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}catch(n){console.log(n)}}(e,!0)},className:e.id==(null===A||void 0===A?void 0:A.id)?c().active:"",children:[(0,g.jsx)("div",{className:c().storeListImage,children:(0,g.jsx)(C.Z,{isImageOnMap:!0,isResize:!1,isFade:!1,isZoomIn:!0,style:{borderRadius:4,overflow:"hidden"},image:null===e||void 0===e?void 0:e.image})}),(0,g.jsx)("div",{className:c().locationContent,children:(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:c().textOverflow,children:e.store_name}),(0,g.jsx)("p",{className:c().textOverflow,children:e.address}),!(null===e||void 0===e||!e.distance)&&(0,g.jsxs)("p",{children:[e.distance," km away"]}),(0,g.jsx)("p",{className:c().currentSchedule,children:"Open from ".concat(w()(n.open,"HH:mm").format("hh:mm A")," to ").concat(w()(n.close,"HH:mm").format("hh:mm A"))})]})}),(0,g.jsxs)("button",{onClick:function(){return X(e.map_link)},className:c().buttonGetDirect,children:[" ",(0,g.jsx)(O.Nh4,{})," ",(0,g.jsx)("span",{children:"Get Direction"})]}),(0,g.jsx)("span",{onClick:function(){return k(e)},className:c().buttonGetInfo,children:(0,g.jsx)(d.ttH,{size:20})})]},e.id)})):l.length?(0,g.jsx)(S.Z,{}):[1,2,3].map((function(e){return(0,g.jsx)("div",{className:"".concat(c().storeListLoading," skeletonAnimation")})}))})]})})]})]})}))}},31987:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/store-locator",function(){return n(99716)}])},83136:function(e){e.exports={button:"NavigateButton_button__14_vf"}},47602:function(e){e.exports={container:"findstore_container__1_rYM",mapAndContentContainer:"findstore_mapAndContentContainer__eMZ2u",listContainer:"findstore_listContainer__2owoS",searchContainer:"findstore_searchContainer__21J7t",list:"findstore_list__os_6T",fade:"findstore_fade__1a3iu",active:"findstore_active__3zA2o",textOverflow:"findstore_textOverflow__cAh0j",locationContent:"findstore_locationContent__36mLm",mapContainer:"findstore_mapContainer__2WUNN",filterContainer:"findstore_filterContainer__8HrJa",headerContainer:"findstore_headerContainer__3Pu3h",filterStoreList:"findstore_filterStoreList__xmmuG",buttonGetDirect:"findstore_buttonGetDirect__1WvqW",currentSchedule:"findstore_currentSchedule__8c609",buttonGetInfo:"findstore_buttonGetInfo__M-UJQ",locatorDetail:"findstore_locatorDetail__1mZSk",scheduleList:"findstore_scheduleList__I_4Qf",marker:"findstore_marker__2ROpY",currentMarker:"findstore_currentMarker__1AeBZ",selectedMarker:"findstore_selectedMarker__31Kmv",textNearBy:"findstore_textNearBy__7vMKf",storeListImage:"findstore_storeListImage__3A4sO",storeListLoading:"findstore_storeListLoading__1sPPI",isShowDetail:"findstore_isShowDetail__20Yqr"}}},function(e){e.O(0,[9774,4838,4738,4396,3365,594,3219,1698,4321,4817,9089,4040,4539,9780,2785,2888,179],(function(){return t=31987,e(e.s=t);var t}));var t=e.O();_N_E=t}]);